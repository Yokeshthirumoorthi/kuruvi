version: '3.5'

services:
  face-api:
    container_name: ${FACE_API_SERVICE}
    build:
      context: ./face-api
      dockerfile: Dockerfile
      args:
        FACE_API_PORT: ${FACE_API_PORT}
    restart: on-failure

  face-queue:
    container_name: ${FACE_QUEUE_SERVICE}
    build:
      context: ./face-queue
      dockerfile: Dockerfile
    restart: on-failure
  
  face-detect:
    container_name: ${FACE_DETECT_SERVICE}
    build:
      context: ./face-detect
      dockerfile: Dockerfile
      args:
        FACE_DETECT_PORT: ${FACE_DETECT_PORT}
    restart: on-failure
